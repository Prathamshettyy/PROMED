{% extends 'base.html' %}
{% block title %}My Medicines - ProMed{% endblock %}

{% block content %}
<div class="container">
    <h1 class="text-center mb-5">Available Medicines</h1>
    
    {% if medicines %}
        <div class="medicine-list">
            {% for medicine in medicines %}
                <div class="medicine-item">
                    <div class="medicine-info">
                        <h2>{{ medicine.name }}</h2>
                        <p><strong>Factory:</strong> {{ medicine.factory_name }}</p>
                        <p><strong>Manufacturing Date:</strong> {{ medicine.manufacturing_date.strftime('%d-%m-%Y') }}</p>
                        <p><strong>Expiry Date:</strong> {{ medicine.expiry_date.strftime('%d-%m-%Y') }}</p>
                        <p><strong>Uses:</strong> {{ medicine.uses }}</p>
                        
                        <div class="mt-3">
                            <a href="{{ url_for('view_medicine', medicine_id=medicine.id) }}" class="btn btn-view">View Details</a>
                            <form method="POST" action="{{ url_for('delete_medicine', medicine_id=medicine.id) }}" class="d-inline">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
  <button type="submit" class="btn btn-delete">Delete</button>
</form>

                        </div>
                    </div>
                    
                    <div class="qr-section">
                        <h3>QR Code</h3>
                        <img src="{{ url_for('static', filename=medicine.qr_code.replace('static/', '')) }}" 
                             alt="QR Code for {{ medicine.name }}" class="qr-code-img">
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-center">
            <p class="lead">No medicines added yet.</p>
            <a href="{{ url_for('add_medicine') }}" class="cta-button">Add Your First Medicine</a>
        </div>
    {% endif %}
</div>
{% endblock %}
